/* Automatically generated, using 
Q = 
* 40 0 0 0 0 0 0 0 0
* 0 40 0 0 0 0 0 0 0
* 0 0 40 0 0 0 0 0 0
* 0 0 0 4.000000e-02 0 0 0 0 0
* 0 0 0 0 4.000000e-02 0 0 0 0
* 0 0 0 0 0 4.000000e-02 0 0 0
* 0 0 0 0 0 0 6.714924e-04 0 0
* 0 0 0 0 0 0 0 6.714924e-04 0
* 0 0 0 0 0 0 0 0 6.714924e-04
R = 
* 9.121488e+00 0 0
* 0 9.121488e+00 0
* 0 0 9.121488e+00
*/

#include "attitude.h"
#include <math.h>  /* sqrt */

/*
 * @note    This is an automatically generated function. Do not edit it here,
 *          edit it in the template, or in the MATLAB code generator.
 */
void getControllerOutput(const ReducedStateX x_hat_r,
                         const ReferenceQuaternion ref, ControllerOutputU u) {
    /* Calculate the real part of the quaternion from the reduced state. */
    double xq0 = sqrt(1.0 - x_hat_r[0] * x_hat_r[0] - x_hat_r[1] * x_hat_r[1] -
                      x_hat_r[2] * x_hat_r[2]);
    /* Generated calculations for control signal. */
    u[0]       = 0.0000000000000005154988098371267*ref[3 - 1] - 5.3890304111925406e-23*ref[2 - 1] - 1.9287790586075562e-60*ref[4 - 1] - 0.13010590365305746*x_hat_r[4 - 1] - 0.0101899761375044*x_hat_r[7 - 1] + 1.9413226506703893*xq0*(ref[2 - 1] + 4.2757454042867633e-24*ref[3 - 1] + 2.315308802843516e-58*ref[4 - 1]) + 1.9413226506703893*x_hat_r[2 - 1]*(5.7199614427550076e-56*ref[2 - 1] + 9.8783012395623913e-54*ref[3 - 1] + ref[4 - 1]) - 1.9413226506703893*ref[1 - 1]*x_hat_r[1 - 1] + 1.9413226506703893*x_hat_r[3 - 1]*(6.2091048801771541e-24*ref[2 - 1] - 1.0*ref[3 - 1] + 1.436136712903985e-61*ref[4 - 1]);
    u[1]       = 2.378512852777054e-42*ref[4 - 1] - 4.6928135442745394e-23*ref[3 - 1] - 0.00000000000000036022590193871999*ref[2 - 1] - 0.132591671802718*x_hat_r[5 - 1] - 0.0099736932638821458*x_hat_r[8 - 1] + 1.9444854789794261*x_hat_r[3 - 1]*(ref[2 - 1] + 4.2757454042867633e-24*ref[3 - 1] + 2.315308802843516e-58*ref[4 - 1]) - 1.9444854789794261*x_hat_r[1 - 1]*(5.7199614427550076e-56*ref[2 - 1] + 9.8783012395623913e-54*ref[3 - 1] + ref[4 - 1]) - 1.9444854789794261*ref[1 - 1]*x_hat_r[2 - 1] - 1.9444854789794261*xq0*(6.2091048801771541e-24*ref[2 - 1] - 1.0*ref[3 - 1] + 1.436136712903985e-61*ref[4 - 1]);
    u[2]       = 1.097410878985392e-38*ref[2 - 1] + 1.9003629674138627e-36*ref[3 - 1] - 0.00000000000000069896685471747815*ref[4 - 1] - 0.19086562455952086*x_hat_r[6 - 1] + 0.0062499506019343268*x_hat_r[9 - 1] - 2.0036437402475*x_hat_r[2 - 1]*(ref[2 - 1] + 4.2757454042867633e-24*ref[3 - 1] + 2.315308802843516e-58*ref[4 - 1]) + 2.0036437402475*xq0*(5.7199614427550076e-56*ref[2 - 1] + 9.8783012395623913e-54*ref[3 - 1] + ref[4 - 1]) - 2.0036437402475*ref[1 - 1]*x_hat_r[3 - 1] - 2.0036437402475*x_hat_r[1 - 1]*(6.2091048801771541e-24*ref[2 - 1] - 1.0*ref[3 - 1] + 1.436136712903985e-61*ref[4 - 1]);
}